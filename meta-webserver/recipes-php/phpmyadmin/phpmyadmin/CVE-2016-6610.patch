From dd732134f27abc6fc41d4ec52a9e02914ca8fdf6 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Michal=20=C4=8Ciha=C5=99?= <michal@cihar.com>
Date: Wed, 13 Jul 2016 09:47:09 +0200
Subject: [PATCH] Do not try to create non existing classes
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: Michal Čihař <michal@cihar.com>
---
 libraries/plugin_interface.lib.php |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/libraries/plugin_interface.lib.php b/libraries/plugin_interface.lib.php
index 1d165a1..b9fd1b6 100644
--- a/libraries/plugin_interface.lib.php
+++ b/libraries/plugin_interface.lib.php
@@ -37,7 +37,10 @@ function PMA_getPlugin(
     if (is_file($plugins_dir . $file)) {
         //include_once $plugins_dir . $file;
         $fqnClass = 'PMA\\' . str_replace('/', '\\', $plugins_dir) . $class_name;
-        return new $fqnClass;
+        // check if class exists, could be caused by skip_import
+        if (class_exists($fqnClass)) {
+            return new $fqnClass;
+        }
     }
 
     return null;
-- 
1.7.9.5

