From 6da13e2a1cbcd204617ab140ab70e08258473e33 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Michal=20=C4=8Ciha=C5=99?= <michal@cihar.com>
Date: Tue, 12 Jul 2016 12:29:35 +0200
Subject: [PATCH] Escape HTML in Mediawiki comments
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: Michal Čihař <michal@cihar.com>
---
 libraries/plugins/export/ExportMediawiki.php |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/libraries/plugins/export/ExportMediawiki.php b/libraries/plugins/export/ExportMediawiki.php
index 085b956..810198b 100644
--- a/libraries/plugins/export/ExportMediawiki.php
+++ b/libraries/plugins/export/ExportMediawiki.php
@@ -360,7 +360,7 @@ class ExportMediawiki extends ExportPlugin
         // see http://www.mediawiki.org/wiki/Help:Formatting
         $comment = $this->_exportCRLF();
         $comment .= '<!--' . $this->_exportCRLF();
-        $comment .= $text . $this->_exportCRLF();
+        $comment .= htmlspecialchars($text) . $this->_exportCRLF();
         $comment .= '-->' . str_repeat($this->_exportCRLF(), 2);
 
         return $comment;
-- 
1.7.9.5

