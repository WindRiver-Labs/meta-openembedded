From 0fad7290c90f9b192aff4e4946b3276803946a70 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Michal=20=C4=8Ciha=C5=99?= <michal@cihar.com>
Date: Tue, 19 Jul 2016 09:20:15 +0200
Subject: [PATCH] Escape database name in SQL query
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: Michal Čihař <michal@cihar.com>
---
 libraries/server_privileges.lib.php |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/libraries/server_privileges.lib.php b/libraries/server_privileges.lib.php
index 3e6faca..bed0a92 100644
--- a/libraries/server_privileges.lib.php
+++ b/libraries/server_privileges.lib.php
@@ -2384,7 +2384,7 @@ function PMA_getListOfPrivilegesAndComparedPrivileges()
  */
 function PMA_getHtmlTableBodyForSpecificDbRoutinePrivs($db, $odd_row, $index_checkbox)
 {
-    $sql_query = 'SELECT * FROM `mysql`.`procs_priv` WHERE Db = "' . $db . '";';
+    $sql_query = 'SELECT * FROM `mysql`.`procs_priv` WHERE Db = "' . Util::sqlAddSlashes($db) . '";';
     $res = $GLOBALS['dbi']->query($sql_query);
     $html_output = '';
     while ($row = $GLOBALS['dbi']->fetchAssoc($res)) {
-- 
1.7.9.5

