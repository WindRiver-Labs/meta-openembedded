From 3cbfb163cff9e5b8cdeace8312e9bfee810ed02b Mon Sep 17 00:00:00 2001
From: Cristy <urban-warrior@imagemagick.org>
Date: Mon, 31 Oct 2016 19:49:54 -0400
Subject: [PATCH] https://github.com/ImageMagick/ImageMagick/issues/296

---
 MagickCore/fx.c         |    2 +-
 PerlMagick/demo/demo.pl |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/MagickCore/fx.c b/MagickCore/fx.c
index 09d7a2a..869b07b 100644
--- a/MagickCore/fx.c
+++ b/MagickCore/fx.c
@@ -5866,7 +5866,7 @@ MagickExport Image *WaveletDenoiseImage(const Image *image,
     ThrowImageException(ResourceLimitError,"MemoryAllocationFailed");
   pixels_info=AcquireVirtualMemory(3*image->columns,image->rows*
     sizeof(*pixels));
-  kernel=(float *) AcquireQuantumMemory(MagickMax(image->rows,image->columns),
+  kernel=(float *) AcquireQuantumMemory(MagickMax(image->rows,image->columns)+1,
     GetOpenMPMaximumThreads()*sizeof(*kernel));
   if ((pixels_info == (MemoryInfo *) NULL) || (kernel == (float *) NULL))
     {
diff --git a/PerlMagick/demo/demo.pl b/PerlMagick/demo/demo.pl
index 0061597..b175bcf 100644
--- a/PerlMagick/demo/demo.pl
+++ b/PerlMagick/demo/demo.pl
@@ -483,7 +483,7 @@ push(@$images,$example);
 
 print "WaveletDenoise...\n";
 $example=$model->Clone();
-$example->Label('WaveletDenoise');
+$example->Label('Wavelet Denoise');
 $example->WaveletDenoise('5%');
 push(@$images,$example);
 
-- 
1.7.9.5

