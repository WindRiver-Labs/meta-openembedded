From 7e99acac04e4401c7da98f9fd255e4b4345d8819 Mon Sep 17 00:00:00 2001
From: Trevor Gamblin <trevor.gamblin@windriver.com>
Date: Mon, 3 May 2021 16:58:51 -0400
Subject: [PATCH] freebl: change armv8-a+crypto to armv8.2-a+crypto

Change the subarchitecture for marvell-cn96xx builds.

Upstream-Status: Inappropriate (WR-specific fix for BSP)

Signed-off-by: Trevor Gamblin <trevor.gamblin@windriver.com>
---
 nss/lib/freebl/Makefile | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/nss/lib/freebl/Makefile b/nss/lib/freebl/Makefile
index 269e34c5c..a636dc576 100644
--- a/nss/lib/freebl/Makefile
+++ b/nss/lib/freebl/Makefile
@@ -749,10 +749,10 @@ endif
 endif
 
 ifeq ($(CPU_ARCH),aarch64)
-$(OBJDIR)/$(PROG_PREFIX)aes-armv8$(OBJ_SUFFIX): CFLAGS += -march=armv8-a+crypto
-$(OBJDIR)/$(PROG_PREFIX)gcm-aarch64$(OBJ_SUFFIX): CFLAGS += -march=armv8-a+crypto
-$(OBJDIR)/$(PROG_PREFIX)sha1-armv8$(OBJ_SUFFIX): CFLAGS += -march=armv8-a+crypto
-$(OBJDIR)/$(PROG_PREFIX)sha256-armv8$(OBJ_SUFFIX): CFLAGS += -march=armv8-a+crypto
+$(OBJDIR)/$(PROG_PREFIX)aes-armv8$(OBJ_SUFFIX): CFLAGS += -march=armv8.2-a+crypto
+$(OBJDIR)/$(PROG_PREFIX)gcm-aarch64$(OBJ_SUFFIX): CFLAGS += -march=armv8.2-a+crypto
+$(OBJDIR)/$(PROG_PREFIX)sha1-armv8$(OBJ_SUFFIX): CFLAGS += -march=armv8.2-a+crypto
+$(OBJDIR)/$(PROG_PREFIX)sha256-armv8$(OBJ_SUFFIX): CFLAGS += -march=armv8.2-a+crypto
 endif
 
 ifeq ($(CPU_ARCH),ppc)
-- 
2.30.2

